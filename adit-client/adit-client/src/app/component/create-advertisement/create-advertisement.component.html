<div class="container d-flex justify-content-center">
  <form [formGroup]="advForm" (ngSubmit)="createAdvertisement()"
        class="col-8 mt-5">
    <input class="col-12 form-control-lg bg-opacity-50 bg-white mt-2 mb-3"
           type="text"
           name="name"
           id="name"
           placeholder="Enter name" required formControlName="name">
    <input class="col-12 form-control-lg bg-opacity-50 bg-white mb-3"
           type="text"
           name="description"
           id="description"
           placeholder="Write description" required formControlName="description">
    <input class="col-12 form-control-lg bg-opacity-50 bg-white mb-3"
           type="number"
           name="price"
           id="price"
           placeholder="Enter price"
           required
           formControlName="price">
    <input class="col-12 form-control-lg bg-opacity-50 bg-white mb-3"
           (click)="open(content)"
           placeholder="Choose category"
           value="{{currentCategory?.name}}">
    <div class="col-12 form-control-lg bg-opacity-50 bg-white mb-3 d-flex" aria-placeholder="images">
      <div class="col-10 d-flex card-group">
        <div class="d-flex ms-3 times-body col-10" *ngFor="let image of images">
          <span>{{image.name}}</span>
          <div class="ms-1 times" (click)="deleteImage(image)"><fa-icon [icon]="faCross"></fa-icon></div>
        </div>
      </div>
      <label class="col-2 btn btn-success position-relative end-0" style="height: 40px">
        <input type="file" (change)="onFileSelect($event)">
        <span><fa-icon [icon]="faPlus"></fa-icon></span>
      </label>
    </div>
    <label *ngIf="features.length" (click)="showFeatures = !showFeatures" class="btn btn-warning bg-opacity-25">Характеристики</label>
    <div *ngIf="showFeatures">
    <div *ngFor="let feature of features" class="col-12 form-control-lg bg-opacity-50 bg-white mb-3 p-1 d-flex">
      <label class="col-4">{{feature.name}}</label>:
      <input type="text" (change)="changeFeatureValue($event, feature)" class="bg-opacity-10 bg-white ps-2 col-8 my-0">
    </div>
    </div>
    <input type="submit" value="create" class="btn btn-success col-12">
  </form>


</div>


<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Категории</h4>
    <div class="d-flex ms-5">
      <div class="form-outline">
        <input [formControl]="words" (change)="searchCategories(0)" type="search" id="form1" class="form-control"
               placeholder="Search"/>
      </div>
      <button type="button" class="btn btn-primary" (click)="searchCategories(0)">
        <fa-icon [icon]="faSearch"></fa-icon>
      </button>
    </div>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body">
    <div>
      <div style="min-height: 600px">
        <table class="table">
          <tbody>
          <tr *ngFor="let category of categories">
            <td class="col-10">{{category.name}}</td>
            <td>
              <button class="btn btn-success" (click)="chooseCategory(category,modal)">Add</button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <ul class="pagination bottom-0" *ngIf="categories.length">
        <li class="page-item" *ngIf="categoryPage!=0"><a class="page-link"
               (click)="searchCategories(0)">1</a>
        <li class="page-item" *ngIf="categoryPage>3"><a class="page-link">. . .</a></li>
        <li class="page-item" *ngIf="categoryPage>2"><a class="page-link"
               (click)="searchCategories(categoryPage-2)">{{categoryPage - 1}}</a>
        </li>
        <li class="page-item" *ngIf="categoryPage>1"><a class="page-link"
               (click)="searchCategories(categoryPage-1)">{{categoryPage}}</a>
        </li>
        <li disabled="true" class="page-item"><a class="page-link">{{categoryPage + 1}}</a></li>
        <li class="page-item" *ngIf="categoryPage<totalCategoryPage-2"><a class="page-link"
               (click)="searchCategories(categoryPage+1)">{{categoryPage + 2}}</a>
        </li>
        <li class="page-item" *ngIf="categoryPage<totalCategoryPage-3"><a class="page-link"
               (click)="searchCategories(categoryPage+2)">{{categoryPage + 3}}</a>
        <li class="page-item" *ngIf="categoryPage<totalCategoryPage - 4"><a class="page-link">. . .</a></li>
        <li class="page-item" *ngIf="categoryPage!=totalCategoryPage-1"><a class="page-link"
               (click)="searchCategories(totalCategoryPage-1)">{{totalCategoryPage}}</a>
        </li>
      </ul>
    </div>

  </div>
</ng-template>
